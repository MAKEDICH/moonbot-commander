================================================================
                 БАТНИКИ - ОПИСАНИЕ И НАЗНАЧЕНИЕ
================================================================

ФИНАЛЬНАЯ СТРУКТУРА - 6 БАТНИКОВ:

1. LOCAL-SETUP.bat
   ├─ Проверяет Python и Node.js
   ├─ Устанавливает backend зависимости (pip install)
   ├─ Генерирует security keys
   ├─ Применяет миграции БД
   ├─ Устанавливает frontend зависимости (npm install)
   ├─ Чистит кеш (.vite, node_modules\.vite)
   └─ НЕ запускает приложение!
   
   ИСПОЛЬЗОВАНИЕ: Для первоначальной настройки на локальной машине

2. LOCAL-START.bat
   ├─ Проверяет что LOCAL-SETUP.bat был выполнен
   ├─ АВТОМАТИЧЕСКИ останавливает старые процессы (python.exe, node.exe) ⭐ НОВОЕ!
   ├─ Чистит dev-кеш Vite
   ├─ Открывает 3 ОТДЕЛЬНЫХ ОКНА:
   │   ├─ MoonBot Backend (uvicorn --reload)
   │   ├─ MoonBot Scheduler
   │   └─ MoonBot Frontend (npm run dev)
   └─ Выводит ссылки для доступа
   
   ИСПОЛЬЗОВАНИЕ: Для запуска приложения на локальной машине
   ВАЖНО: НЕ закрывать 3 окна!
   ⭐ НОВОЕ: Теперь автоматически убивает старые процессы перед запуском!

3. SERVER-SETUP.bat
   ├─ [ТРЕБУЕТ ПРАВА АДМИНИСТРАТОРА]
   ├─ Проверяет/устанавливает Python 3.11
   ├─ Проверяет/устанавливает Node.js 18 LTS
   ├─ Устанавливает backend зависимости
   ├─ Генерирует security keys
   ├─ Применяет миграции БД
   ├─ Устанавливает frontend зависимости
   ├─ СОБИРАЕТ PRODUCTION BUILD (npm run build)
   ├─ Настраивает Windows Firewall (порты 3000, 8000)
   ├─ Устанавливает NSSM (для Windows Services)
   ├─ Создаёт 3 Windows Services:
   │   ├─ MoonBotBackend (Auto-start)
   │   ├─ MoonBotScheduler (Auto-start)
   │   └─ MoonBotFrontend (Auto-start)
   └─ НЕ запускает службы!
   
   ИСПОЛЬЗОВАНИЕ: Для первоначальной настройки на Windows Server
   ВАЖНО: Запускать от имени администратора!

4. SERVER-START.bat
   ├─ Проверяет что SERVER-SETUP.bat был выполнен
   ├─ АВТОМАТИЧЕСКИ останавливает Windows Services (если есть) ⭐ НОВОЕ!
   ├─ АВТОМАТИЧЕСКИ останавливает старые процессы (python.exe, node.exe) ⭐ НОВОЕ!
   ├─ Открывает 3 ОТДЕЛЬНЫХ ОКНА:
   │   ├─ MoonBot Backend (uvicorn production mode)
   │   ├─ MoonBot Scheduler
   │   └─ MoonBot Frontend (serve -s dist)
   └─ Выводит ссылки для доступа (с IP сервера)
   
   ИСПОЛЬЗОВАНИЕ: Для запуска приложения на сервере в режиме мониторинга
   ВАЖНО: НЕ закрывать 3 окна!
   ⭐ НОВОЕ: Автоматически чистит старые процессы и службы!
   ПРИМЕЧАНИЕ: Для автозапуска через Windows Services используй:
               net start MoonBotBackend
               net start MoonBotScheduler
               net start MoonBotFrontend

5. moonbot-udp-port-manager.bat
   ├─ Утилита для управления UDP портами MoonBot
   └─ Не изменялся, оставлен как есть
   
   ИСПОЛЬЗОВАНИЕ: Специальная утилита для UDP портов

6. KILL-ALL-PROCESSES.bat ⭐ НОВЫЙ!
   ├─ Принудительно убивает ВСЕ процессы MoonBot
   ├─ Останавливает Windows Services (если есть)
   ├─ Убивает все Python процессы
   ├─ Убивает все Node.js процессы
   ├─ Проверяет что всё остановлено
   └─ Освобождает порты 3000 и 8000
   
   ИСПОЛЬЗОВАНИЕ: Когда порты заняты или процессы зависли
   КОГДА НУЖЕН: 
     - Если LOCAL-START.bat или SERVER-START.bat не запускается
     - Если порты 3000 или 8000 заняты
     - Если процессы зависли
     - Перед чистым перезапуском
   
   ⚠️ ВНИМАНИЕ: Убивает ВСЕ Python и Node.js процессы!
                Если у тебя запущены другие Python/Node проекты - они тоже остановятся!

================================================================
                       ТИПИЧНЫЕ СЦЕНАРИИ
================================================================

СЦЕНАРИЙ 1: Первый запуск на локалке
   1. Запусти: LOCAL-SETUP.bat
   2. Запусти: LOCAL-START.bat
   3. Открой: http://localhost:3000
   4. Зарегистрируйся и добавь серверы

СЦЕНАРИЙ 2: Первый запуск на сервере
   1. Запусти от администратора: SERVER-SETUP.bat
   2. Запусти: SERVER-START.bat
   3. Открой: http://SERVER_IP:3000
   4. Зарегистрируйся и добавь серверы

СЦЕНАРИЙ 3: Повторный запуск локалки
   1. Запусти: LOCAL-START.bat
   2. Готово! (автоматически почистит старые процессы)

СЦЕНАРИЙ 4: Повторный запуск сервера
   Вариант A (Windows Services - автозапуск):
      - Просто перезагрузи сервер
      - Службы запустятся автоматически
   
   Вариант B (Ручной запуск с мониторингом):
      1. Запусти: SERVER-START.bat
      2. Следи за логами в 3 окнах

СЦЕНАРИЙ 5: Обновление кода
   На локалке:
      1. Закрой 3 окна LOCAL-START.bat
      2. Обнови код (git pull или скопируй файлы)
      3. Запусти: LOCAL-SETUP.bat (если нужны новые зависимости)
      4. Запусти: LOCAL-START.bat
   
   На сервере:
      1. Останови службы: net stop MoonBotBackend/Scheduler/Frontend
      2. Обнови код
      3. Запусти: SERVER-SETUP.bat (пересоберёт frontend)
      4. Запусти службы: net start ... или SERVER-START.bat

СЦЕНАРИЙ 6: Порты заняты или процессы зависли ⭐ НОВЫЙ!
   1. Запусти: KILL-ALL-PROCESSES.bat
   2. Дождись полной остановки
   3. Запусти: LOCAL-START.bat или SERVER-START.bat
   4. Готово!

================================================================
                           ВАЖНО!
================================================================

✅ SETUP батники - настраивают всё, но НЕ запускают
✅ START батники - запускают приложение в отдельных окнах
✅ START батники АВТОМАТИЧЕСКИ чистят старые процессы ⭐ НОВОЕ!
✅ Все окна НУЖНЫ для мониторинга работы
✅ SERVER-SETUP требует прав администратора
✅ После SERVER-SETUP службы автоматом запускаются при перезагрузке
✅ KILL-ALL-PROCESSES - "аварийная кнопка" для очистки ⭐ НОВОЕ!

================================================================

1. LOCAL-SETUP.bat
   ├─ Проверяет Python и Node.js
   ├─ Устанавливает backend зависимости (pip install)
   ├─ Генерирует security keys
   ├─ Применяет миграции БД
   ├─ Устанавливает frontend зависимости (npm install)
   ├─ Чистит кеш (.vite, node_modules\.vite)
   └─ НЕ запускает приложение!
   
   ИСПОЛЬЗОВАНИЕ: Для первоначальной настройки на локальной машине

2. LOCAL-START.bat
   ├─ Проверяет что LOCAL-SETUP.bat был выполнен
   ├─ Останавливает старые процессы (python.exe, node.exe)
   ├─ Чистит dev-кеш Vite
   ├─ Открывает 3 ОТДЕЛЬНЫХ ОКНА:
   │   ├─ MoonBot Backend (uvicorn --reload)
   │   ├─ MoonBot Scheduler
   │   └─ MoonBot Frontend (npm run dev)
   └─ Выводит ссылки для доступа
   
   ИСПОЛЬЗОВАНИЕ: Для запуска приложения на локальной машине
   ВАЖНО: НЕ закрывать 3 окна!

3. SERVER-SETUP.bat
   ├─ [ТРЕБУЕТ ПРАВА АДМИНИСТРАТОРА]
   ├─ Проверяет/устанавливает Python 3.11
   ├─ Проверяет/устанавливает Node.js 18 LTS
   ├─ Устанавливает backend зависимости
   ├─ Генерирует security keys
   ├─ Применяет миграции БД
   ├─ Устанавливает frontend зависимости
   ├─ СОБИРАЕТ PRODUCTION BUILD (npm run build)
   ├─ Настраивает Windows Firewall (порты 3000, 8000)
   ├─ Устанавливает NSSM (для Windows Services)
   ├─ Создаёт 3 Windows Services:
   │   ├─ MoonBotBackend (Auto-start)
   │   ├─ MoonBotScheduler (Auto-start)
   │   └─ MoonBotFrontend (Auto-start)
   └─ НЕ запускает службы!
   
   ИСПОЛЬЗОВАНИЕ: Для первоначальной настройки на Windows Server
   ВАЖНО: Запускать от имени администратора!

4. SERVER-START.bat
   ├─ Проверяет что SERVER-SETUP.bat был выполнен
   ├─ Останавливает Windows Services (если есть)
   ├─ Останавливает старые процессы
   ├─ Открывает 3 ОТДЕЛЬНЫХ ОКНА:
   │   ├─ MoonBot Backend (uvicorn production mode)
   │   ├─ MoonBot Scheduler
   │   └─ MoonBot Frontend (serve -s dist)
   └─ Выводит ссылки для доступа (с IP сервера)
   
   ИСПОЛЬЗОВАНИЕ: Для запуска приложения на сервере в режиме мониторинга
   ВАЖНО: НЕ закрывать 3 окна!
   ПРИМЕЧАНИЕ: Для автозапуска через Windows Services используй:
               net start MoonBotBackend
               net start MoonBotScheduler
               net start MoonBotFrontend

5. moonbot-udp-port-manager.bat
   ├─ Утилита для управления UDP портами MoonBot
   └─ Не изменялся, оставлен как есть
   
   ИСПОЛЬЗОВАНИЕ: Специальная утилита для UDP портов

================================================================
                       ТИПИЧНЫЕ СЦЕНАРИИ
================================================================

СЦЕНАРИЙ 1: Первый запуск на локалке
   1. Запусти: LOCAL-SETUP.bat
   2. Запусти: LOCAL-START.bat
   3. Открой: http://localhost:3000
   4. Зарегистрируйся и добавь серверы

СЦЕНАРИЙ 2: Первый запуск на сервере
   1. Запусти от администратора: SERVER-SETUP.bat
   2. Запусти: SERVER-START.bat
   3. Открой: http://SERVER_IP:3000
   4. Зарегистрируйся и добавь серверы

СЦЕНАРИЙ 3: Повторный запуск локалки
   1. Запусти: LOCAL-START.bat
   2. Готово!

СЦЕНАРИЙ 4: Повторный запуск сервера
   Вариант A (Windows Services - автозапуск):
      - Просто перезагрузи сервер
      - Службы запустятся автоматически
   
   Вариант B (Ручной запуск с мониторингом):
      1. Запусти: SERVER-START.bat
      2. Следи за логами в 3 окнах

СЦЕНАРИЙ 5: Обновление кода
   На локалке:
      1. Закрой 3 окна LOCAL-START.bat
      2. Обнови код (git pull или скопируй файлы)
      3. Запусти: LOCAL-SETUP.bat (если нужны новые зависимости)
      4. Запусти: LOCAL-START.bat
   
   На сервере:
      1. Останови службы: net stop MoonBotBackend/Scheduler/Frontend
      2. Обнови код
      3. Запусти: SERVER-SETUP.bat (пересоберёт frontend)
      4. Запусти службы: net start ... или SERVER-START.bat

================================================================
                           ВАЖНО!
================================================================

✅ SETUP батники - настраивают всё, но НЕ запускают
✅ START батники - запускают приложение в отдельных окнах
✅ Все окна НУЖНЫ для мониторинга работы
✅ SERVER-SETUP требует прав администратора
✅ После SERVER-SETUP службы автоматом запускаются при перезагрузке

================================================================

